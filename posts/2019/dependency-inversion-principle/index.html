<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Dependency Inversion Principle - Sir</title><meta name="Description" content=""><meta property="og:title" content="Dependency Inversion Principle" />
<meta property="og:description" content="I accidently knew the concept of Dependency Inversion Principle(DIP) when I was developing a project. Its definition:
High level modules should not depend on low level modules; both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions.
Confusing, right? The first time I heard of this principle, I thought it was about the organization of directories. 😆
Example 1: without DIP Let&rsquo;s say we have an application that has the following structure:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.leewei.co/posts/2019/dependency-inversion-principle/" />
<meta property="article:published_time" content="2019-12-11T00:13:40+08:00" />
<meta property="article:modified_time" content="2019-12-11T00:13:40+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dependency Inversion Principle"/>
<meta name="twitter:description" content="I accidently knew the concept of Dependency Inversion Principle(DIP) when I was developing a project. Its definition:
High level modules should not depend on low level modules; both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions.
Confusing, right? The first time I heard of this principle, I thought it was about the organization of directories. 😆
Example 1: without DIP Let&rsquo;s say we have an application that has the following structure:"/>
<meta name="application-name" content="Sir">
<meta name="apple-mobile-web-app-title" content="Sir"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://www.leewei.co/posts/2019/dependency-inversion-principle/" /><link rel="prev" href="https://www.leewei.co/posts/2019/how-to-avoid-asking-bad-questions/" /><link rel="next" href="https://www.leewei.co/posts/2019/ds-array-linked-list/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Dependency Inversion Principle",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/www.leewei.co\/posts\/2019\/dependency-inversion-principle\/"
        },"genre": "posts","keywords": "golang, clean architecture, dip","wordcount":  505 ,
        "url": "https:\/\/www.leewei.co\/posts\/2019\/dependency-inversion-principle\/","datePublished": "2019-12-11T00:13:40+08:00","dateModified": "2019-12-11T00:13:40+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Lee Wei"},"author": {
                "@type": "Person",
                "name": "Lee Wei"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Sir">Sir</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="/tags/"> Tags </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Sir">Sir</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="/tags/" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Dependency Inversion Principle</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Lee Wei</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2019-12-11">2019-12-11</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;505 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;3 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#example-1-without-dip">Example 1: without DIP</a></li>
        <li><a href="#example-2-with-dip">Example 2: with DIP</a></li>
        <li><a href="#advantages-of-using-dip">Advantages of using DIP</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>I accidently knew the concept of Dependency Inversion Principle(DIP) when I was developing a project.
Its definition:</p>
<p><strong><code>High level modules should not depend on low level modules; both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions.</code></strong></p>
<p>Confusing, right? The first time I heard of this principle, I thought it was about the organization of directories. 😆</p>
<h3 id="example-1-without-dip">Example 1: without DIP</h3>
<p>Let&rsquo;s say we have an application that has the following structure:</p>
<p>User Interface -&gt; Bussiness Logic Layer -&gt; Data Access Layer -&gt; Database</p>
<p>A user wants to see the total account users in the database. He can do this by clicking a button to get the data.
The click event triggered Bussinees Logic Layer to create a new instance, then this instance retrieved these data from the data access layer.
After that Data Access Layer made a query from the database. As a result, the queried data will display on the web.</p>
<p>This application didn&rsquo;t seperate each layer, it is a tight-coupled architecture.
It is fine if we&rsquo;re developing a small project like this, but as the project grow, it&rsquo;ll get more difficult to maintain and debug.</p>
<h3 id="example-2-with-dip">Example 2: with DIP</h3>
<p>Here is sample project layout with DIP:</p>
<pre><code>| app(root directory of this project)
| &gt; interface.go
|-- main
|   &gt; main.go
|-- dao
|   &gt; dao.go
|   &gt; dao_test.go
|-- core
    &gt; core.go    
	&gt; core_test.go
    &gt; interface.go
</code></pre><p>We divide this application into three packages:</p>
<ol>
<li><code>main</code>: API enpoints and error handling.</li>
<li><code>dao(data access object)</code>: collections of methods that are operating database.</li>
<li><code>core</code>: manage bussiness logic of this application.</li>
</ol>
<h3 id="advantages-of-using-dip">Advantages of using DIP</h3>
<ol>
<li>Testing</li>
</ol>
<p>If we divide this application into little pieces, we can test these packages separately.
For instance, we can use something like <a href="https://github.com/golang/mock" target="_blank" rel="noopener noreffer">mock</a> to help us test functions in dao.
In this way, we will be certain that our dao package is ready to use before using it in other packages.</p>
<ol start="2">
<li>Portable</li>
</ol>
<p>As our application grow, sometimes we need to find better solutions.
For example, we might use SQLite for our application because it is a POC project.
Later on, SQLite might not be able to handle large concurrent users.
So the team want to switch to PostgreSQL database for a better performace handling.</p>
<p><strong>Since business layer(core package) is depend on the abstraction(interface),
the team just needs to change some configurations in the dao package and doesn&rsquo;t have to change any code in the business layer!</strong></p>
<p><figure><a class="lightgallery" href="noice.gif" title="Noice" data-thumbnail="noice.gif" data-sub-html="<h2>Noice</h2><p>Noice</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="noice.gif"
            data-srcset="noice.gif, noice.gif 1.5x, noice.gif 2x"
            data-sizes="auto"
            alt="noice.gif" />
    </a><figcaption class="image-caption">Noice</figcaption>
    </figure></p>
<ol start="3">
<li>Maintainable</li>
</ol>
<p>It&rsquo;ll be much more easier to let members maintain large code base because we have divide each function into small packages.
New members will have a better understanding to the code repository and senior members can quickly review these functions after a long time.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Dependency Inversion Principle is a good concept that all engineers should know about, but I&rsquo;m not saying we should always follow this principle. We should always consider the size of the project and the total amount of people that work in this project. Small project for fun? Maybe stick with <a href="https://en.wikipedia.org/wiki/Monolithic_application." target="_blank" rel="noopener noreffer">Monolithic_application</a>.😝</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2019-12-11</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/golang/">golang</a>,&nbsp;<a href="/tags/clean-architecture/">clean architecture</a>,&nbsp;<a href="/tags/dip/">dip</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/2019/how-to-avoid-asking-bad-questions/" class="prev" rel="prev" title="How to Avoid Asking Bad Questions"><i class="fas fa-angle-left fa-fw"></i>How to Avoid Asking Bad Questions</a>
            <a href="/posts/2019/ds-array-linked-list/" class="next" rel="next" title="Data Structures: Array &amp; Linked List">Data Structures: Array &amp; Linked List<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.74.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Lee Wei</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="https://https-www-leewei-co.disqus.com/embed.js" defer></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
