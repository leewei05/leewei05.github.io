<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<title>Dependency Inversion Principle</title>


  



<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link
  rel="alternate"
  type="application/rss+xml"
  href="https://www.leewei.co/index.xml"
  title="What does the fox say?"
/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dependency Inversion Principle"/>
<meta name="twitter:description" content="I accidently knew the concept of Dependency Inversion Principle(DIP) when I was developing a project. Its definition:
High level modules should not depend on low level modules; both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions.
Confusing, right? The first time I heard of this principle, I thought it was about the organization of directories. :laughing:
Example 1: without DIP Let&rsquo;s say we have an application that has the following structure:"/>



<link rel="stylesheet" href="https://www.leewei.co/fontawesome/css/all.min.css" />

<link
  id="dark-mode-theme"
  rel="stylesheet"
  href="https://www.leewei.co/css/dark.css"
/>

<script>
  var darkTheme = document.getElementById('dark-mode-theme')
  var storedTheme = localStorage.getItem('dark-mode-storage')
  
    darkTheme.disabled = false
  
  
  
</script>

<script src="https://www.leewei.co/js/bundle.js"></script>
<script src="https://www.leewei.co/js/instantpage.min.js" type="module" defer></script>
<meta name="generator" content="Hugo 0.81.0" />
  </head>
  <body>
    
  




  <header>
    <nav class="navbar">
  <div class="nav">
    
        <a href="https://www.leewei.co/" class="nav-logo">
        <img
          src="https://www.leewei.co/images/icon.png"
          width="50"
          height="50"
          alt="Logo"
        />
        </a>
    

    <ul class="nav-links">
      
        
          <li>
            <a href="/about/" id="About"
              ><em class="fas fa-user fa-lg"></em
            ></a>
          </li>
          
      
    </ul>
  </div>
</nav>

    <div class="intro-header">
      <div class="container">
        <div class="posts-heading">
          
            <h1>
              Dependency Inversion Principle
            </h1>
          
          
        </div>
      </div>
    </div>
  </header>
  

    
  <div class="container" role="main">
    <article class="article" class="blog-post">
      
  <p>I accidently knew the concept of Dependency Inversion Principle(DIP) when I was developing a project.
Its definition:</p>
<p><strong><code>High level modules should not depend on low level modules; both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions.</code></strong></p>
<p>Confusing, right? The first time I heard of this principle, I thought it was about the organization of directories. :laughing:</p>
<h3 id="example-1-without-dip">Example 1: without DIP</h3>
<p>Let&rsquo;s say we have an application that has the following structure:</p>
<p>User Interface -&gt; Bussiness Logic Layer -&gt; Data Access Layer -&gt; Database</p>
<p>A user wants to see the total account users in the database. He can do this by clicking a button to get the data.
The click event triggered Bussinees Logic Layer to create a new instance, then this instance retrieved these data from the data access layer.
After that Data Access Layer made a query from the database. As a result, the queried data will display on the web.</p>
<p>This application didn&rsquo;t seperate each layer, it is a tight-coupled architecture.
It is fine if we&rsquo;re developing a small project like this, but as the project grow, it&rsquo;ll get more difficult to maintain and debug.</p>
<h3 id="example-2-with-dip">Example 2: with DIP</h3>
<p>Here is sample project layout with DIP:</p>
<pre><code>| app(root directory of this project)
| &gt; interface.go
|-- main
|   &gt; main.go
|-- dao
|   &gt; dao.go
|   &gt; dao_test.go
|-- core
    &gt; core.go    
	&gt; core_test.go
    &gt; interface.go
</code></pre><p>We divide this application into three packages:</p>
<ol>
<li><code>main</code>: API enpoints and error handling.</li>
<li><code>dao(data access object)</code>: collections of methods that are operating database.</li>
<li><code>core</code>: manage bussiness logic of this application.</li>
</ol>
<h3 id="advantages-of-using-dip">Advantages of using DIP</h3>
<ol>
<li>Testing</li>
</ol>
<p>If we divide this application into little pieces, we can test these packages separately.
For instance, we can use something like <a href="https://github.com/golang/mock">mock</a> to help us test functions in dao.
In this way, we will be certain that our dao package is ready to use before using it in other packages.</p>
<ol start="2">
<li>Portable</li>
</ol>
<p>As our application grow, sometimes we need to find better solutions.
For example, we might use SQLite for our application because it is a POC project.
Later on, SQLite might not be able to handle large concurrent users.
So the team want to switch to PostgreSQL database for a better performace handling.</p>
<p><strong>Since business layer(core package) is depend on the abstraction(interface),
the team just needs to change some configurations in the dao package and doesn&rsquo;t have to change any code in the business layer!</strong></p>
<p><img src="noice.gif" alt="Noice" title="Noice"></p>
<ol start="3">
<li>Maintainable</li>
</ol>
<p>It&rsquo;ll be much more easier to let members maintain large code base because we have divide each function into small packages.
New members will have a better understanding to the code repository and senior members can quickly review these functions after a long time.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Dependency Inversion Principle is a good concept that all engineers should know about, but I&rsquo;m not saying we should always follow this principle. We should always consider the size of the project and the total amount of people that work in this project. Small project for fun? Maybe stick with <a href="https://en.wikipedia.org/wiki/Monolithic_application.">Monolithic_application</a>.:stuck_out_tongue_closed_eyes:</p>




      
        <div class="blog-tags">
          
            <a href="https://www.leewei.co/tags/golang/">golang</a
            >&nbsp;
          
            <a href="https://www.leewei.co/tags/clean-architecture/">clean architecture</a
            >&nbsp;
          
            <a href="https://www.leewei.co/tags/dip/">dip</a
            >&nbsp;
          
        </div>
      
    </article>
    
    
      
  <div id="disqus_thread"></div>
  <script type="text/javascript">
        (function() {
            
            
            if (window.location.hostname == "localhost") return;

            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            var disqus_shortname = 'https-www-leewei-co';
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
  <noscript
    >Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript"
      >comments powered by Disqus.</a
    ></noscript
  >
  <a href="https://disqus.com/" class="dsq-brlink"
    >comments powered by <span class="logo-disqus">Disqus</span></a
  >


    
  </div>

    <footer>
  
  <div>
    
      <a href="https://github.com/leewei05" name="github"
        ><em class="fab fa-github"></em
      ></a>
    
      <a href="https://twitter.com/leewei666" name="twitter"
        ><em class="fab fa-twitter"></em
      ></a>
    
      <a href="https://www.linkedin.com/in/lee-wei-02249b119/" name="linkedin"
        ><em class="fab fa-linkedin"></em
      ></a>
    




  
  <div class="container">
    <p class="credits copyright">
      <a href="https://www.leewei.co/about">Lee Wei</a>
      &nbsp;&copy;
      2020
      
        &nbsp;/&nbsp;
        <a href="https://www.leewei.co/">What does the fox say?</a>
      
    </p>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
  </div>
</footer>

  </body>
</html>
