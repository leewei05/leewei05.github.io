<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Go RESTful API pt.3 - Running App on GKE - Sir</title><meta name="Description" content=""><meta property="og:title" content="Go RESTful API pt.3 - Running App on GKE" />
<meta property="og:description" content="On the previous post, we have already build our Docker image and succefully run it on our local computer. Right now, we are going to learn some basic knowledge of Google Kubernetes Engine and how to deploy our service to it.
Kubernetes Kubernetes(k8s) is an open source system for users to manage their containerized applications.
Why do we need Kubernetes? Kubernetes is a system that makes sure our containers are running as we expected." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.leewei.co/posts/2020/go-app-from-scratch-p3/" />
<meta property="article:published_time" content="2020-06-23T08:32:11+08:00" />
<meta property="article:modified_time" content="2020-06-23T08:32:11+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Go RESTful API pt.3 - Running App on GKE"/>
<meta name="twitter:description" content="On the previous post, we have already build our Docker image and succefully run it on our local computer. Right now, we are going to learn some basic knowledge of Google Kubernetes Engine and how to deploy our service to it.
Kubernetes Kubernetes(k8s) is an open source system for users to manage their containerized applications.
Why do we need Kubernetes? Kubernetes is a system that makes sure our containers are running as we expected."/>
<meta name="application-name" content="Sir">
<meta name="apple-mobile-web-app-title" content="Sir"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://www.leewei.co/posts/2020/go-app-from-scratch-p3/" /><link rel="prev" href="https://www.leewei.co/posts/2020/go-app-from-scratch-p2/" /><link rel="next" href="https://www.leewei.co/posts/2020/go-app-from-scratch-p4/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Go RESTful API pt.3 - Running App on GKE",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/www.leewei.co\/posts\/2020\/go-app-from-scratch-p3\/"
        },"genre": "posts","keywords": "Go, App, RESTful, Docker, Kubernetes, GKE","wordcount":  1030 ,
        "url": "https:\/\/www.leewei.co\/posts\/2020\/go-app-from-scratch-p3\/","datePublished": "2020-06-23T08:32:11+08:00","dateModified": "2020-06-23T08:32:11+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Lee Wei"},"author": {
                "@type": "Person",
                "name": "Lee Wei"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Sir">Sir</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="/tags/"> Tags </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Sir">Sir</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="/tags/" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Go RESTful API pt.3 - Running App on GKE</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Lee Wei</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-06-23">2020-06-23</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1030 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;5 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#kubernetes">Kubernetes</a>
      <ul>
        <li><a href="#why-do-we-need-kubernetes">Why do we need Kubernetes?</a></li>
        <li><a href="#what-does-google-kubernetes-engine-do">What does Google Kubernetes Engine do?</a></li>
      </ul>
    </li>
    <li><a href="#install-gcloud-sdk--kubectl-command-line-tool">Install gcloud SDK &amp; kubectl command line tool</a></li>
    <li><a href="#prerequisites-before-creating-our-gke-cluster">Prerequisites before creating our GKE cluster</a>
      <ul>
        <li><a href="#cloud-iam">Cloud IAM</a></li>
        <li><a href="#virtual-private-cloudvpc-network--subnetwork">Virtual Private Cloud(VPC) Network &amp; Subnetwork</a></li>
        <li><a href="#create-a-custom-vpc-network--subnetwork">Create a custom VPC network &amp; Subnetwork</a></li>
      </ul>
    </li>
    <li><a href="#create-a-gke-cluster-on-our-custom-vpc-network">Create a GKE cluster on our custom VPC network</a></li>
    <li><a href="#push-our-local-docker-image-to-google-container-registrygcr">Push our local Docker image to Google Container Registry(GCR)</a></li>
    <li><a href="#deploy-our-docker-image-to-gke-cluster">Deploy our Docker image to GKE cluster</a>
      <ul>
        <li><a href="#what-is-deployment">What is Deployment?</a></li>
      </ul>
    </li>
    <li><a href="#expose-our-deployment">Expose our Deployment</a>
      <ul>
        <li><a href="#what-is-service">What is Service?</a></li>
        <li><a href="#why-do-we-need-service">Why do we need Service?</a></li>
        <li><a href="#create-a-service">Create a Service</a></li>
      </ul>
    </li>
    <li><a href="#test-our-application">Test our application</a></li>
    <li><a href="#what-we-have-accomplished">What we have accomplished!</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>On the previous post, we have already build our Docker image and succefully run it on our local computer.
Right now, we are going to learn some basic knowledge of Google Kubernetes Engine and how to deploy our service to it.</p>
<h2 id="kubernetes">Kubernetes</h2>
<p>Kubernetes(k8s) is an open source system for users to manage their containerized applications.</p>
<h3 id="why-do-we-need-kubernetes">Why do we need Kubernetes?</h3>
<p>Kubernetes is a system that makes sure our containers are running as we expected.</p>
<h3 id="what-does-google-kubernetes-engine-do">What does Google Kubernetes Engine do?</h3>
<p>Google Kubernetes Engine (GKE) provides a managed environment for deploying, managing, and scaling your containerized applications using Google infrastructure.
<a href="https://cloud.google.com/kubernetes-engine/docs/concepts/kubernetes-engine-overview" target="_blank" rel="noopener noreffer">1</a></p>
<p>If we set up Kubernetes on our own machine, we have to maintain Kubernetes master on our own.
<a href="https://kubernetes.io/docs/concepts/#overview" target="_blank" rel="noopener noreffer">2</a>
But with GKE, we can run our workloads easily. And get benefit from other services in GCP like load balancing, auto scaling, auto upgrades etc.</p>
<h2 id="install-gcloud-sdk--kubectl-command-line-tool">Install gcloud SDK &amp; kubectl command line tool</h2>
<p>We need to install <code>gcloud</code> and <code>kubectl</code> first, in order to interact with GCP&rsquo;s service and our Kubernetes clusters.
<a href="https://cloud.google.com/sdk/install" target="_blank" rel="noopener noreffer">3</a>
<a href="https://cloud.google.com/kubernetes-engine/docs/quickstart#choosing_a_shell" target="_blank" rel="noopener noreffer">4</a></p>
<p>Check if they are installed in your local shell:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ gcloud version
$ kubectl version
// There should be specific versions <span class="k">for</span> both <span class="nb">command</span> line tool
</code></pre></div><p>Set up our account and GCP project first:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ gcloud auth login
Your browser has been opened to visit:

<span class="o">[</span>There will be a link here, click on the link to authenticate your Google account.<span class="o">]</span>
<span class="o">[</span>After login with your Google account, it will display the Google account below<span class="o">]</span>

<span class="c1"># Replace [GOOGLE_ACCOUNT] to your account. lol</span>
You are now logged in as <span class="o">[</span>GOOGLE_ACCOUNT<span class="o">]</span>.

$ gcloud config <span class="nb">set</span> project <span class="o">[</span>PROJECT_ID<span class="o">]</span>
Updated property <span class="o">[</span>core/project<span class="o">]</span>.
</code></pre></div><h2 id="prerequisites-before-creating-our-gke-cluster">Prerequisites before creating our GKE cluster</h2>
<h3 id="cloud-iam">Cloud IAM</h3>
<p>Make sure you have <a href="https://cloud.google.com/iam/docs/understanding-roles" target="_blank" rel="noopener noreffer">IAM roles</a> that can create VPC network, GKE cluster.
I&rsquo;ll be using <code>project owner</code>, we&rsquo;ll talk about more detailed IAM policies in the future.</p>
<h3 id="virtual-private-cloudvpc-network--subnetwork">Virtual Private Cloud(VPC) Network &amp; Subnetwork</h3>
<p>VPC Network is a virtual version of a physical network.
Each VPC Network in the project consists of serveral subnets.
Each subnet is associated with one region and the definition of an IP range.</p>
<h3 id="create-a-custom-vpc-network--subnetwork">Create a custom VPC network &amp; Subnetwork</h3>
<p>Create VPC network <code>k8s-network</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ gcloud compute networks create k8s-network <span class="se">\
</span><span class="se"></span>    --bgp-routing-mode<span class="o">=</span>global <span class="se">\
</span><span class="se"></span>    --subnet-mode<span class="o">=</span>custom
Created <span class="o">[</span>https://www.googleapis.com/compute/v1/projects/<span class="o">[</span>PROJECT_ID<span class="o">]</span>/global/networks/k8s-network<span class="o">]</span>.
NAME         SUBNET_MODE  BGP_ROUTING_MODE  IPV4_RANGE  GATEWAY_IPV4
k8s-network  CUSTOM       GLOBAL
</code></pre></div><p>Create a subnet <code>us-west1</code> in <code>k8s-network</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ gcloud compute networks subnets create us-west1 --network<span class="o">=</span>k8s-network --range<span class="o">=</span>10.0.10.0/24 --region<span class="o">=</span>us-west1
Created <span class="o">[</span>https://www.googleapis.com/compute/v1/projects/<span class="o">[</span>PROJECT_ID<span class="o">]</span>/regions/us-west1/subnetworks/us-west1<span class="o">]</span>.
NAME      REGION    NETWORK      RANGE
us-west1  us-west1  k8s-network  10.0.10.0/24
</code></pre></div><p>Check if our subnet is successfully created:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ gcloud compute networks subnets list <span class="p">|</span> grep k8s-network
us-west1    us-west1                 k8s-network  10.0.10.0/24
</code></pre></div><h2 id="create-a-gke-cluster-on-our-custom-vpc-network">Create a GKE cluster on our custom VPC network</h2>
<p>We&rsquo;ll create a single-zone GKE cluster with one n1-standard-1(1vCPU, 3.75GB RAM) in us-west1:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ gcloud container clusters create lee-cluster <span class="se">\
</span><span class="se"></span>  --zone us-west1-a <span class="se">\
</span><span class="se"></span>  --machine-type n1-standard-1 <span class="se">\
</span><span class="se"></span>  --num-nodes <span class="m">1</span> <span class="se">\
</span><span class="se"></span>  --network k8s-network <span class="se">\
</span><span class="se"></span>  --subnetwork us-west1
NAME         LOCATION    MASTER_VERSION  MASTER_IP        MACHINE_TYPE   NODE_VERSION    NUM_NODES  STATUS
lee-cluster  us-west1-a  1.14.10-gke.36  <span class="o">[</span>GKE_MASTER_IP<span class="o">]</span>  n1-standard-1  1.14.10-gke.36  <span class="m">1</span>          RUNNING
</code></pre></div><p>After creating GKE cluster, we can manage it remotely using <code>kubectl</code>.
Before using <code>kubectl</code>, we need to authorize for our account to connect to GKE master.</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ gcloud container clusters get-credentials lee-cluster --zone us-west1-a
Fetching cluster endpoint and auth data.
kubeconfig entry generated <span class="k">for</span> lee-cluster.

// We can see there is one node in our GKE cluster
$ kubectl get nodes
NAME                                         STATUS   ROLES    AGE   VERSION
gke-lee-cluster-default-pool-a6753d6c-th44   Ready    &lt;none&gt;   10m   v1.14.10-gke.36
</code></pre></div><h2 id="push-our-local-docker-image-to-google-container-registrygcr">Push our local Docker image to Google Container Registry(GCR)</h2>
<p>By default, if our container registry is in the same project with the GKE cluster,
we don&rsquo;t need to configure extra authentication.</p>
<p>Use <code>gcloud</code> as a credential helper:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ gcloud auth configure-docker
</code></pre></div><p>Tag our local Docker image:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ docker tag go-api gcr.io/<span class="o">[</span>PROJECT_ID<span class="o">]</span>/go-api
</code></pre></div><p>Push Docker image to GCR:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ docker push gcr.io/<span class="o">[</span>PROJECT_ID<span class="o">]</span>/go-api
</code></pre></div><p>List Docker image in our GCR:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ gcloud container images list
NAME
gcr.io/<span class="o">[</span>PROJECT_ID<span class="o">]</span>/go-api
</code></pre></div><h2 id="deploy-our-docker-image-to-gke-cluster">Deploy our Docker image to GKE cluster</h2>
<p>We need to know the concept of Deployment in Kubernetes before deploy our Docker image to GKE.</p>
<h3 id="what-is-deployment">What is Deployment?</h3>
<p>Deployment fulfills the desired state that we declared.
In other words, Deployment guarantees our workloads will have the exact number, resources, labels etc. in the yaml file.</p>
<p>Create <code>api.yaml</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">apiVersion</span><span class="p">:</span><span class="w"> </span>apps/v1<span class="w">
</span><span class="w"></span><span class="k">kind</span><span class="p">:</span><span class="w"> </span>Deployment<span class="w">
</span><span class="w"></span><span class="k">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">name</span><span class="p">:</span><span class="w"> </span>go-api-deployment<span class="w">
</span><span class="w">  </span><span class="k">labels</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">app</span><span class="p">:</span><span class="w"> </span>go-api<span class="w">
</span><span class="w"></span><span class="k">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">replicas</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span><span class="w">  </span><span class="k">selector</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">matchLabels</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="k">app</span><span class="p">:</span><span class="w"> </span>go-api<span class="w">
</span><span class="w">  </span><span class="k">template</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="k">labels</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="k">app</span><span class="p">:</span><span class="w"> </span>go-api<span class="w">
</span><span class="w">    </span><span class="k">spec</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="k">containers</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>go-api<span class="w">
</span><span class="w">        </span><span class="k">image</span><span class="p">:</span><span class="w"> </span>gcr.io/<span class="p">[</span>PROJECT_ID<span class="p">]</span>/go-api<span class="p">:</span>latest<span class="w">
</span><span class="w">        </span><span class="k">ports</span><span class="p">:</span><span class="w">
</span><span class="w">        </span>- <span class="k">containerPort</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></code></pre></div><p>Deploy our Deployment to GKE:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ kubectl apply -f api.yaml
deployment.apps/go-api-deployment created

$ kubectl get deployments
NAME                READY   UP-TO-DATE   AVAILABLE   AGE
go-api-deployment   2/2     <span class="m">2</span>            <span class="m">2</span>           6m3s

$ kubectl get pods
NAME                                 READY   STATUS    RESTARTS   AGE
go-api-deployment-65c5dd7fb9-6c5ww   1/1     Running   <span class="m">0</span>          107m
go-api-deployment-65c5dd7fb9-b55zs   1/1     Running   <span class="m">0</span>          107m
</code></pre></div><p>We can see in our deployment, there are two pods running.</p>
<h2 id="expose-our-deployment">Expose our Deployment</h2>
<p>As we deployed our Docker image using Deployment, you might ask how should we access to our containers?
The answer is to use <code>Service</code> to expose our Deployment to public.</p>
<h3 id="what-is-service">What is Service?</h3>
<p>The concept of Service is to group a set of Pods into an endpoint.
After setting up a LoadBalancer type Service, we will have an external IP address for the Service.
We can make a request to the IP address, and the request is routed to one of the Pods in the Deployment.</p>
<h3 id="why-do-we-need-service">Why do we need Service?</h3>
<p>Because Pods in the Deployment come and go, it doesn&rsquo;t make sense to connect Pods with their internal IPs.
Service is a stable way for clients to direct their requests to the Pods.</p>
<h3 id="create-a-service">Create a Service</h3>
<p>Create a file <code>service.yaml</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">apiVersion</span><span class="p">:</span><span class="w"> </span>v1<span class="w">
</span><span class="w"></span><span class="k">kind</span><span class="p">:</span><span class="w"> </span>Service<span class="w">
</span><span class="w"></span><span class="k">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">name</span><span class="p">:</span><span class="w"> </span>go-api-service<span class="w">
</span><span class="w"></span><span class="k">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">selector</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">app</span><span class="p">:</span><span class="w"> </span>go-api<span class="w">
</span><span class="w">  </span><span class="k">type</span><span class="p">:</span><span class="w"> </span>LoadBalancer<span class="w"> 
</span><span class="w">  </span><span class="k">ports</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="k">protocol</span><span class="p">:</span><span class="w"> </span>TCP<span class="w">
</span><span class="w">    </span><span class="k">port</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span><span class="w">    </span><span class="k">targetPort</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></code></pre></div><p>This service will create a network load balancer(pass through).
It will listen requests on port 80 and redirect requests to port 8080 in the Pod.</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ kubectl apply -f service.yaml
service/go-api-service created

$ kubectl get service
NAME             TYPE           CLUSTER-IP     EXTERNAL-IP    PORT<span class="o">(</span>S<span class="o">)</span>        AGE
go-api-service   LoadBalancer   <span class="o">[</span>CLUSTER_IP<span class="o">]</span>   <span class="o">[</span>EXTERNAL_IP<span class="o">]</span>  80:31616/TCP   85s
</code></pre></div><p>As I said, <code>LoadBalancer</code> Service will automatically create a network load balancer.
We can check it by using <code>gcloud</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ gcloud compute forwarding-rules list
NAME                              REGION    IP_ADDRESS       IP_PROTOCOL  TARGET
a14a443f9b55b11eaa5f542010a8a022  us-west1  <span class="o">[</span>EXTERNAL_IP<span class="o">]</span>    TCP          us-west1/targetPools/a14a443f9b55b11eaa5f542010a8a022
</code></pre></div><p>The external IP address showed above should be the same IP address for our <code>LoadBalancer</code> Service.</p>
<h2 id="test-our-application">Test our application</h2>
<p>Use the [EXTERNAL_IP] of the load balancer to test our application:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ curl http://<span class="o">[</span>EXTERNAL_IP<span class="o">]</span>:80/v1/api/
Hello Go api
</code></pre></div><h2 id="what-we-have-accomplished">What we have accomplished!</h2>
<ul>
<li>Know the basic of Kubernetes</li>
<li>How to use gcloud &amp; kubectl command</li>
<li>Setting up VPC networks</li>
<li>Push Docker image to container registry</li>
<li>Deploy our Docker image with Deployment</li>
<li>Expose our service with LoadBalancer Service</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2020-06-23</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/go/">Go</a>,&nbsp;<a href="/tags/app/">App</a>,&nbsp;<a href="/tags/restful/">RESTful</a>,&nbsp;<a href="/tags/docker/">Docker</a>,&nbsp;<a href="/tags/kubernetes/">Kubernetes</a>,&nbsp;<a href="/tags/gke/">GKE</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/2020/go-app-from-scratch-p2/" class="prev" rel="prev" title="Go RESTful API pt.2 - API Server &amp; Docker Image"><i class="fas fa-angle-left fa-fw"></i>Go RESTful API pt.2 - API Server &amp; Docker Image</a>
            <a href="/posts/2020/go-app-from-scratch-p4/" class="next" rel="next" title="Go RESTful API pt.4 - GitLab Respository">Go RESTful API pt.4 - GitLab Respository<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.74.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Lee Wei</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="https://https-www-leewei-co.disqus.com/embed.js" defer></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
