<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>DNS(Domain Name System) Overview - Sir</title><meta name="Description" content=""><meta property="og:title" content="DNS(Domain Name System) Overview" />
<meta property="og:description" content="This is a summary of DNS related topics that we met in our daily life. Recommend anyone who wants to dive deep in DNS to read the article written by Cloudflare
What is DNS? The Domain Name System(DNS) is a service that translate domain names to IP addresses. So that, we can load resources from web server to our local browser.
How does DNS work? The process of DNS resolution is the following:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.leewei.co/posts/2020/dns-brief-records/" />
<meta property="article:published_time" content="2020-06-18T10:41:42+08:00" />
<meta property="article:modified_time" content="2020-06-18T10:41:42+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="DNS(Domain Name System) Overview"/>
<meta name="twitter:description" content="This is a summary of DNS related topics that we met in our daily life. Recommend anyone who wants to dive deep in DNS to read the article written by Cloudflare
What is DNS? The Domain Name System(DNS) is a service that translate domain names to IP addresses. So that, we can load resources from web server to our local browser.
How does DNS work? The process of DNS resolution is the following:"/>
<meta name="application-name" content="Sir">
<meta name="apple-mobile-web-app-title" content="Sir"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://www.leewei.co/posts/2020/dns-brief-records/" /><link rel="prev" href="https://www.leewei.co/posts/2020/go-app-from-scratch-p1/" /><link rel="next" href="https://www.leewei.co/posts/2020/go-app-from-scratch-p2/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "DNS(Domain Name System) Overview",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/www.leewei.co\/posts\/2020\/dns-brief-records\/"
        },"genre": "posts","keywords": "DNS","wordcount":  991 ,
        "url": "https:\/\/www.leewei.co\/posts\/2020\/dns-brief-records\/","datePublished": "2020-06-18T10:41:42+08:00","dateModified": "2020-06-18T10:41:42+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","author": {
                "@type": "Person",
                "name": "Lee Wei"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Sir">Sir</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="/tags/"> Tags </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Sir">Sir</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="/tags/" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">DNS(Domain Name System) Overview</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Lee Wei</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-06-18>2020-06-18</time>&nbsp;
                <i class="fas fa-pencil-alt fa-fw"></i>&nbsp;about 991 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;5 min&nbsp;</div>
        </div><div class="details toc" id="toc-static">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-dns">What is DNS?</a></li>
    <li><a href="#how-does-dns-work">How does DNS work?</a></li>
    <li><a href="#what-is-dns-caching">What is DNS caching?</a></li>
    <li><a href="#time-to-livettl">Time-To-Live(TTL)</a>
      <ul>
        <li><a href="#ttl-in-networking">TTL in Networking</a></li>
        <li><a href="#ttl-in-cdn">TTL in CDN</a></li>
        <li><a href="#ttl-in-dns">TTL in DNS</a></li>
      </ul>
    </li>
    <li><a href="#what-is-a-dns-record">What is a DNS Record?</a>
      <ul>
        <li><a href="#common-dns-record-types">Common DNS Record Types</a></li>
      </ul>
    </li>
    <li><a href="#dns-tools">DNS Tools</a></li>
    <li><a href="#public-dns-resolver">Public DNS resolver</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>This is a summary of DNS related topics that we met in our daily life.
Recommend anyone who wants to dive deep in DNS to read the article written by <a href="https://www.cloudflare.com/learning/dns/what-is-dns/%22" target="_blank" rel="noopener noreffer">Cloudflare</a></p>
<h2 id="what-is-dns">What is DNS?</h2>
<p>The Domain Name System(DNS) is a service that translate domain names to IP addresses.
So that, we can load resources from web server to our local browser.</p>
<h2 id="how-does-dns-work">How does DNS work?</h2>
<p>The process of DNS resolution is the following:</p>
<pre><code>User types a domain into the browser, i.e. example.com
				|
				V
DNS recursor a.k.a DNS resolver receives request from client applications,
DNS recursor will make additional requests to satisfy user's DNS query.
				|
				V
Root Server receives the request from DNS recursor(query client),
parse the hostname into IP addresses and return them to DNS recursor.
Its purpose is to tell DNS recursor specific locations to look for results.
				|
				V
DNS recursor sends requests to Top Level Domain(TLD) Server for specific IP address.
In this example, DNS resursor will query from .com server for more info.
				|
				V
The final stop of DNS query is the Authoritatibe Server.
Authoritative Server will return the IP address for the requested hostname(example.com).
				|
				V
DNS recursor will return the IP address for example.com to the browser.
				|
				V
The browser will use that IP address to retrieve resources from example.com's web server
and show them on the browser.
</code></pre><p>For more details on different types of DNS server, please <a href="https://www.cloudflare.com/learning/dns/dns-server-types/" target="_blank" rel="noopener noreffer">check</a></p>
<h2 id="what-is-dns-caching">What is DNS caching?</h2>
<p>The purpose of DNS caching is to improve loading performance and reduce resource(bandwidth/CPU) consumption.
Right after the user made a request to an URL(example.com), the browser cache is the first location to search,
then the OS level DNS cache. If we didn't find our DNS record in the cache, the DNS client in our OS will
send DNS query to a DNS resolver outside our network.</p>
<p>How long will the DNS cache exists? It depends on the configuration of time-to-live(TTL).</p>
<h2 id="time-to-livettl">Time-To-Live(TTL)</h2>
<p>There are different meaning of TTL in Networking, CDN and DNS.</p>
<h3 id="ttl-in-networking">TTL in Networking</h3>
<p>TTL in networking is also called hop-limit. Whenever a packet of information is sent out to the internet,
there might be chances that packet got lost and stuck in a infinity loop.
Everytime a router receives a packet, it'll substract the TTL count by one in the packet and send it to the next router.
The packet with 0 count of TTL will be dropped.</p>
<h3 id="ttl-in-cdn">TTL in CDN</h3>
<p>TTL in CDN is how long the cache content that will be stored in the CDN edge server.
CDN edge server will retrieve the newest content from the origin whenever TTL is 0.
By setting a proper amount of time for TTL, we can serve our end users content more efficiently
and reduce the traffic of requesting content from the origin server.</p>
<h3 id="ttl-in-dns">TTL in DNS</h3>
<p>TTL in DNS is how long the DNS cache can serve before it request new DNS records from the
authoritative server.</p>
<h2 id="what-is-a-dns-record">What is a DNS Record?</h2>
<p>DNS records a.k.a zone files are text files store in the authoritative server.
The content inside the files include, IP address, related domain and how to handle requests for that domain.</p>
<h3 id="common-dns-record-types">Common DNS Record Types</h3>
<ul>
<li>A record: map IPv4 address to a domain.</li>
<li>AAAA record: map IPv6 address to a domain.</li>
<li>CNAME record: map one domain or subdomain to another domain.</li>
<li>MX record: directs mails to an email server.</li>
<li>TXT record: let domain administrator stores text notes in the record.</li>
<li>NS record: stores the name server for the DNS entry.
NS record indicates which name server is authoritative for a specific doamin.
There are often multiple name servers for primary and backup for domain.</li>
<li>SRV record: Specifies a port for specific services.</li>
</ul>
<h2 id="dns-tools">DNS Tools</h2>
<ul>
<li>dig: DNS lookup utility</li>
</ul>
<p>We can see the result of A record 172.217.160.110 and the name servers for domain <code>google.com</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ dig google.com
<span class="p">;</span> &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; google.com
<span class="p">;</span><span class="p">;</span> global options: +cmd
<span class="p">;</span><span class="p">;</span> Got answer:
<span class="p">;</span><span class="p">;</span> -&gt;&gt;HEADER<span class="s">&lt;&lt;- opco</span>de: QUERY, status: NOERROR, id: <span class="m">53287</span>
<span class="p">;</span><span class="p">;</span> flags: qr rd ra<span class="p">;</span> QUERY: 1, ANSWER: 1, AUTHORITY: 13, ADDITIONAL: <span class="m">1</span>

<span class="p">;</span><span class="p">;</span> OPT PSEUDOSECTION:
<span class="p">;</span> EDNS: version: 0, flags:<span class="p">;</span> udp: <span class="m">4096</span>
<span class="p">;</span><span class="p">;</span> QUESTION SECTION:
<span class="p">;</span>google.com.			IN	A

<span class="p">;</span><span class="p">;</span> ANSWER SECTION:
google.com.		51	IN	A	172.217.160.110

<span class="p">;</span><span class="p">;</span> AUTHORITY SECTION:
.			86494	IN	NS	m.root-servers.net.
.			86494	IN	NS	f.root-servers.net.
.			86494	IN	NS	d.root-servers.net.
.			86494	IN	NS	c.root-servers.net.
.			86494	IN	NS	l.root-servers.net.
.			86494	IN	NS	e.root-servers.net.
.			86494	IN	NS	b.root-servers.net.
.			86494	IN	NS	i.root-servers.net.
.			86494	IN	NS	a.root-servers.net.
.			86494	IN	NS	j.root-servers.net.
.			86494	IN	NS	g.root-servers.net.
.			86494	IN	NS	k.root-servers.net.
.			86494	IN	NS	h.root-servers.net.

<span class="p">;</span><span class="p">;</span> Query time: <span class="m">7</span> msec
<span class="p">;</span><span class="p">;</span> SERVER: 192.168.0.11#53<span class="o">(</span>192.168.0.11<span class="o">)</span>
<span class="p">;</span><span class="p">;</span> WHEN: Thu Jun <span class="m">18</span> 16:37:34 CST <span class="m">2020</span>
<span class="p">;</span><span class="p">;</span> MSG SIZE  rcvd: <span class="m">266</span>
</code></pre></div><ul>
<li>nslookup: query Internet name servers interactively</li>
</ul>
<p>The result may be more straight forward, it'll return the IP address for google.com.</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ nslookup google.com
Server:		192.168.0.11
Address:	192.168.0.11#53

Non-authoritative answer:
Name:	google.com
Address: 172.217.160.110
</code></pre></div><ul>
<li>dscacheutil -flushcache</li>
</ul>
<p><code>dscacheutil</code> is a tool that can flush our DNS cache on MacOS and Linux.</p>
<h2 id="public-dns-resolver">Public DNS resolver</h2>
<p>Before I wrote this blog post, everytime I have an internet issue,
My classmates in college would tell me to ping <code>8.8.8.8</code>.
I was like &ldquo;WHY??!!&rdquo; at that time.</p>
<p><code>8.8.8.8</code> and <code>8.8.4.4</code> are Google's public DNS resolver.
Since it's Google's DNS resolver, we can assume that resolver is almost always running. lol
Like it says on the webpage:</p>
<p>Google Public DNS is a free, global DNS resolution service that you can use as an alternative to your current DNS provider.</p>
<p>In 2019, Cloudflare also release their public DNS resolver <a href="https://www.cloudflare.com/learning/dns/what-is-1.1.1.1/" target="_blank" rel="noopener noreffer"><code>1.1.1.1</code></a>.
They claim that <code>1.1.1.1</code> is faster than other third-party DNS resolver.</p>
<h2 id="conclusion">Conclusion</h2>
<p>DNS is quite an interesting topic to study.
We can pick up DNS knowledge by buying domains from GoDaddy or Gandi.
After owning a few domains, we can set up our own DNS server.
I'll write another post for setting up domain in the future. 😌</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>The article was updated on 2020-06-18</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/dns/">DNS</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/2020/go-app-from-scratch-p1/" class="prev" rel="prev" title="Go RESTful API pt.1 - Simple HTTP Server"><i class="fas fa-angle-left fa-fw"></i>Go RESTful API pt.1 - Simple HTTP Server</a>
            <a href="/posts/2020/go-app-from-scratch-p2/" class="next" rel="next" title="Go RESTful API pt.2 - API Server &amp; Docker Image">Go RESTful API pt.2 - API Server &amp; Docker Image<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.62.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.8"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Lee Wei</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="https://https-www-leewei-co.disqus.com/embed.js" defer></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
